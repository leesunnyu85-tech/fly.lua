# fly.lua
local player=game.Players.LocalPlayer;local mouse=player:GetMouse();local userInputService=game:GetService("UserInputService");local runService=game:GetService("RunService");local tweenService=game:GetService("TweenService");local flying=false;noclip=false;flySpeed=50;hover=false;local screenGui=Instance.new("ScreenGui");screenGui.Parent=player.PlayerGui;local mainFrame=Instance.new("Frame");mainFrame.Size=UDim2.new(0,300,0,260);mainFrame.Position=UDim2.new(0,10,0,10);mainFrame.BackgroundColor3=Color3.fromRGB(30,30,30);mainFrame.BackgroundTransparency=0.5;mainFrame.BorderSizePixel=0;mainFrame.Parent=screenGui;local
titleLabel=Instance.new("TextLabel");titleLabel.Size=UDim2.new(0,300,0,30);titleLabel.BackgroundColor3=Color3.fromRGB(50,50,50);titleLabel.TextColor3=Color3.fromRGB(255,255,255);titleLabel.Text="飞行控制";titleLabel.Font=Enum.Font.GothamBold;titleLabel.TextSize=18;titleLabel.TextAlign=Enum.TextAnchor.MiddleCenter;titleLabel.Parent=mainFrame;local toggleFlyButton=Instance.new("TextButton");toggleFlyButton.Size=UDim2.new(0,150,0,40);toggleFlyButton.Position=UDim2.new(0,75,0,40);toggleFlyButton.Text="启动飞行";toggleFlyButton.Font=Enum.Font.Gotham;toggleFlyButton.TextSize=16;toggleFlyButton.TextColor3=Color3.fromRGB(255,255,255);toggleFlyButton.BackgroundColor3=Color3.fromRGB(70,70,70);toggleFlyButton.Parent=mainFrame;local speedSlider=Instance.new("TextButton");speedSlider.Size=UDim2.new(0,150,0,40);speedSlider.Position=UDim2.new(0,75,0,90);speedSlider.Text="飞行速度: "..flySpeed;speedSlider.Font=Enum.Font.Gotham;speedSlider.TextSize=16;speedSlider.TextColor3=Color3.fromRGB(255,255,255);speedSlider.BackgroundColor3=Color3.fromRGB(70,70,70);speedSlider.Parent=mainFrame;local noclipToggleButton=Instance.new("TextButton");noclipToggleButton.Size=UDim2.new(0,150,0,40);noclipToggleButton.Position=UDim2.new(0,75,0,140);noclipToggleButton.Text="开启无碰撞";noclipToggleButton.Font=Enum.Font.Gotham;noclipToggleButton.TextSize=16;noclipToggleButton.TextColor3=Color3.fromRGB(255,255,255);noclipToggleButton.BackgroundColor3=Color3.fromRGB(70,70,70);noclipToggleButton.Parent=mainFrame;local closeButton=Instance.new("TextButton");closeButton.Size=UDim2.new(0,30,0,30);closeButton.Position=UDim2.new(0,270,0,10);closeButton.Text="X";closeButton.Font=Enum.Font.Gotham;closeButton.TextSize=16;closeButton.TextColor3=Color3.fromRGB(255,255,255);closeButton.BackgroundColor3=Color3.fromRGB(200,50,50);closeButton.Parent=mainFrame;local function startFlying() if flying then return end;flying=true;local character=player.Character;local humanoidRootPart=character:WaitForChild("HumanoidRootPart");local bodyGyro=Instance.new("BodyGyro");bodyGyro.MaxTorque=Vector3.new(400000,400000,400000);bodyGyro.P=20000;bodyGyro.CFrame=humanoidRootPart.CFrame;bodyGyro.Parent=humanoidRootPart;local bodyVelocity=Instance.new("BodyVelocity");bodyVelocity.MaxForce=Vector3.new(400000,400000,400000);bodyVelocity.Velocity=Vector3.new(0,0,0);bodyVelocity.Parent=humanoidRootPart;runService.Heartbeat:Connect(function() if flying then local direction=Vector3.new();if userInputService:IsKeyDown(Enum.KeyCode.W) then direction=direction+humanoidRootPart.CFrame.LookVector end;if userInputService:IsKeyDown(Enum.KeyCode.S) then direction=direction-humanoidRootPart.CFrame.LookVector end;if userInputService:IsKeyDown(Enum.KeyCode.A) then direction=direction-humanoidRootPart.CFrame.RightVector end;if userInputService:IsKeyDown(Enum.KeyCode.D) then direction=direction+humanoidRootPart.CFrame.RightVector end;bodyGyro.CFrame=CFrame.new(humanoidRootPart.Position,humanoidRootPart.Position+direction);bodyVelocity.Velocity=direction*flySpeed end end) end;local function stopFlying() flying=false;for _,v in pairs(player.Character:WaitForChild("HumanoidRootPart"):GetChildren()) do if v:IsA("BodyGyro") or v:IsA("BodyVelocity") then v:Destroy() end end end;toggleFlyButton.MouseButton1Click:Connect(function() if flying then stopFlying() toggleFlyButton.Text="启动飞行" else startFlying() toggleFlyButton.Text="停止飞行" end end);noclipToggleButton.MouseButton1Click:Connect(function() noclip=not noclip noclipToggleButton.Text=noclip and "关闭无碰撞" or "开启无碰撞" local character=player.Character if noclip then character:WaitForChild("Humanoid").HipWidth=0 else character:WaitForChild("Humanoid").HipWidth=0.5 end end);speedSlider.MouseButton1Click:Connect(function() flySpeed=flySpeed+10 if flySpeed>100 then flySpeed=50 end speedSlider.Text="飞行速度: "..flySpeed end);closeButton.MouseButton1Click:Connect(function() screenGui:Destroy() end);local dragging=false;local dragInput,dragStart,startPos;mainFrame.InputBegan:Connect(function(input) if input.UserInputType==Enum.UserInputType.MouseButton1 then dragging=true;dragStart=input.Position;startPos=mainFrame.Position end end);mainFrame.InputEnded:Connect(function(input) if input.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end end);mainFrame.InputChanged:Connect(function(input) if dragging then local delta=input.Position-dragStart mainFrame.Position=UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y) end end)
